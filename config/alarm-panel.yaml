---
# This is for converting an alarm panel's door sensors using a Waveshare ESP32-S3 ETH with POE

substitutions:
  device_name: alarm-panel
  name: "Alarm Panel"
  description: "Alarm Panel - Waveshare ESP32-S3 ETH w/ POE installed in alarm panel box for door sensors"

packages:
  <<: !include_dir_named common
  board: !include boards/waveshare_esp32-s3_eth.yaml
  btproxy: !include components/bluetooth_proxy+tracker.yaml

# remove following from the included common files
# can't have both ethernet and wifi components
wifi: !remove
sensor:
  - id: !remove sensor_wifi_signal
  - id: !remove sensor_wifi_signal_percentage
text_sensor:
  - <<: !include text-sensors/ethernet_info.yaml
  - id: !remove wifi_info

# Reports when the reed switchs from GPIO0X to GND is sensing a magnet and the door is closed.
binary_sensor:
- platform: gpio
  name: Front Door
  pin:
    number: GPIO39
    #mode: INPUT_PULLUP
    mode:
      input: true
      pullup: true
    inverted: False
  device_class: door
- platform: gpio
  name: Back Door
  pin:
    number: GPIO40
    #mode: INPUT_PULLUP
    mode:
      input: true
      pullup: true
    inverted: False
  device_class: door
- platform: gpio
  name: Basement Doors
  pin:
    number: GPIO41
    #mode: INPUT_PULLUP
    mode:
      input: true
      pullup: true
    inverted: False
  device_class: door
- platform: gpio
  name: Office Door
  pin:
    number: GPIO42
    #mode: INPUT_PULLUP
    mode:
      input: true
      pullup: true
    inverted: False
  device_class: door

